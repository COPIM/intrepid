{% extends "base/admin_base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}
    Site Backups
{% endblock title %}

{% block page-title %}
    Site Backups
{% endblock page-title %}

{% block breadcrumb %}
    <li class="breadcrumb-item"><a href="#">Site Backups</a></li>
{% endblock %}

{% block dashboard_js %}
    {% include "elements/datatables.js.html" with target='sql' %}
    {% include "elements/datatables.js.html" with target='data' %}
{% endblock %}

{% block content %}
    <!-- this span expands the platform manager tab -->
    <span id="expand_platform_manager">&nbsp;</span>

    <!-- this span sets the active page in the menu -->
    <span id="active_page" class="backups">&nbsp;</span>

    <section class="content">
      <div class="container-fluid">
        <!-- Small boxes (Stat box) -->
            <div class="row">
                <div class="col">
                <h2>SQL Backups</h2>
                    <table class="table-bordered table-striped table" id="sql">
                        <thead>
                            <tr>
                                <th>Date Modified</th>
                                <th>Version ID</th>
                                <th>Size</th>
                                <th>Download</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for sql_entry in sql_versions %}
                                <tr>
                                    <td>{{ sql_entry.lastmodified }}</td>
                                    <td>{{ sql_entry.versionid }}</td>
                                    <td>{{ sql_entry.size }}</td>
                                    <td><a href="{% url 'download_backup' 'sql' sql_entry.versionid %}">Download</a></td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row">
                <div class="col">
                <h2>Data File Backups</h2>
                    <table class="table-bordered table-striped table" id="data">
                        <thead>
                            <tr>
                                <th>Date Modified</th>
                                <th>Version ID</th>
                                <th>Size</th>
                                <th>Download</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for sql_entry in data_versions %}
                                <tr>
                                    <td>{{ sql_entry.lastmodified }}</td>
                                    <td>{{ sql_entry.versionid }}</td>
                                    <td>{{ sql_entry.size }}</td>
                                    <td><a href="{% url 'download_backup' 'data' sql_entry.versionid %}">Download</a></td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>


            <div class="row">
                <div class="col">
                <h2>Thoth Backups</h2>
                    <table class="table-bordered table-striped table" id="data">
                        <thead>
                            <tr>
                                <th>Date Modified</th>
                                <th>Version ID</th>
                                <th>Size</th>
                                <th>Download</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for sql_entry in thoth_versions %}
                                <tr>
                                    <td>{{ sql_entry.lastmodified }}</td>
                                    <td>{{ sql_entry.versionid }}</td>
                                    <td>{{ sql_entry.size }}</td>
                                    <td><a href="{% url 'download_backup' 'data' sql_entry.versionid %}">Download</a></td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

        <!-- /.row (main row) -->
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
{% endblock %}